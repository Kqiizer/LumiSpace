<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Resumen de Compra</title>
    <link rel="stylesheet" href="css/carrito.css">
</head>
<body>
    <div class="container">
        <h1>Resumen de Compra</h1>

        <div class="checkout-grid">
            <div>
                <div class="customer-info">
                    <h2 class="section-title">Información del Cliente</h2>
                    <div class="info-grid">
                        <div class="info-field">
                            <label>Nombre completo</label>
                            <input type="text" id="customerName" placeholder="Ingresa tu nombre completo" required>
                        </div>
                            <div class="info-field">
                            <label for="customerPhone">Teléfono</label>
                            <div style="display: flex; gap: 8px;">
                            <input type="text" value="+52" style="width: 80px; font-size: 15px; padding: 8px;" readonly>
                            <input type="tel" id="customerPhone" placeholder="000 000 0000" style="flex: 1;" required>
                            </div>
                        </div>
                        <div class="info-field">
                            <label for="customerGmail">Correo electrónico</label>
                            <input type="email" id="customerGmail" placeholder="tucorreo@gmail.com" required>
                        </div>
                            <div class="info-field">
                            <label for="customerCountry">País</label>
                            <input type="text" id="customerCountry" value="México" readonly>
                        </div>
                        <div class="info-field full-width">
                            <label>Dirección de entrega</label>
                            <input type="text" id="customerAddress" placeholder="Calle, número, colonia, ciudad" required>
                        </div>
                        <div class="info-field">
                            <label>Fecha de entrega</label>
                            <input type="date" value="2025-10-07" id="deliveryDate" readonly>
                        </div>
                    </div>
                </div>

                <div class="products-list">
                    <h2 class="section-title">Productos en el Carrito</h2>

                    <div class="product-item">
                        <div class="product-image">
                            <img src="imagenes/lamptecho.jpg" alt="Lámpara de techo colgante">
                        </div>
                        <div class="product-details">
                            <div class="product-name">Lámpara Colgante Industrial</div>
                            <div class="product-type">COLGANTE • Negro Mate</div>
                            <div class="product-specs">E27 • Cable 1.5m • Estilo vintage</div>
                        </div>
                        <div class="product-actions">
                            <button class="remove-btn" onclick="removeProduct(this)">✕</button>
                            <div class="quantity-control">
                                <button class="qty-btn" onclick="updateQuantity(this, -1)">−</button>
                                <span class="qty-value">1</span>
                                <button class="qty-btn" onclick="updateQuantity(this, 1)">+</button>
                            </div>
                            <div class="product-price">
                                <div class="unit-price">$54.00 c/u</div>
                                <div class="total-price">$54.00</div>
                            </div>
                        </div>
                    </div>

                    <div class="product-item">
                        <div class="product-image">
                            <img src="imagenes/lampdeco.jpg" alt="Lámpara decorativa RGB">
                        </div>
                        <div class="product-details">
                            <div class="product-name">Lámpara decorativa RGB</div>
                            <div class="product-type">Multicolor</div>
                            <div class="product-specs">Control remoto • Ideal dormitorio o sala</div>
                        </div>
                        <div class="product-actions">
                            <button class="remove-btn" onclick="removeProduct(this)">✕</button>
                            <div class="quantity-control">
                                <button class="qty-btn" onclick="updateQuantity(this, -1)">−</button>
                                <span class="qty-value">1</span>
                                <button class="qty-btn" onclick="updateQuantity(this, 1)">+</button>
                            </div>
                            <div class="product-price">
                                <div class="unit-price">$1,250.00 c/u</div>
                                <div class="total-price">$1,250.00</div>
                            </div>
                        </div>
                    </div>

                    <div class="product-item">
                        <div class="product-image">
                            <img src="https://birot.com/cdn/shop/products/DOMO_45_Y_65_AP_ESTUDIO_1_713x.jpg?v=1652120341" alt="Lámpara de techo DOMO 45">
                        </div>
                        <div class="product-details">
                            <div class="product-name">Lámpara de Techo DOMO 45</div>
                            <div class="product-type">PLAFÓN • Aluminio</div>
                            <div class="product-specs">LED Integrado 54.4W • 3620 lm • Blanco Cálido a Frío </div>
                        </div>
                        <div class="product-actions">
                            <button class="remove-btn" onclick="removeProduct(this)">✕</button>
                            <div class="quantity-control">
                                <button class="qty-btn" onclick="updateQuantity(this, -1)">−</button>
                                <span class="qty-value">2</span>
                                <button class="qty-btn" onclick="updateQuantity(this, 1)">+</button>
                            </div>
                            <div class="product-price">
                                <div class="unit-price">$450.00 c/u</div>
                                <div class="total-price">$900.00</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="order-summary">
                <h2 class="section-title">Resumen del Pedido</h2>
                <div class="summary-row">
                    <span>Subtotal</span>
                    <span id="subtotal">$2,204.00</span>
                </div>
                <div class="summary-row">
                    <span>Envío</span>
                    <span id="shipping">$50.00</span>
                </div>
                <div class="summary-row">
                    <span>IVA (16%)</span>
                    <span id="tax">$360.64</span>
                </div>
                <div class="summary-row total">
                    <span>Total</span>
                    <span id="total">$2,614.64</span>
                </div>
                <button class="pay-button" onclick="openPaymentModal()">Proceder al Pago</button>
            </div>
        </div>
    </div>

    <div class="modal" id="paymentModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">Selecciona tu método de pago</h2>
                <button class="close-modal" onclick="closePaymentModal()">×</button>
            </div>
            <div class="modal-body">
                <div class="payment-methods">
                    <div class="payment-method active" onclick="selectPaymentMethod('card')">
                        <img src="imagenes/tarjeta.png" alt="Tarjeta" style="width:70px; height:70px;">
                        <div class="payment-method-name">Tarjeta</div>
                    </div>
                    <div class="payment-method" onclick="selectPaymentMethod('paypal')">
                        <div class="payment-method-icon">
                            <img src="imagenes/paypal.png" alt="PayPal" style="width:70px; height:70px;">
                        </div>
                        <div class="payment-method-name">PayPal</div>
                    </div>
                    <div class="payment-method" onclick="selectPaymentMethod('transfer')">
                        <img src="imagenes/transf.png" alt="Transferencia" style="width:70px; height:70px;">
                        <div class="payment-method-name">Transferencia</div>
                    </div>
                    <div class="payment-method" onclick="selectPaymentMethod('cash')">
                        <img src="imagenes/efectivo.png" alt="Efectivo" style="width:70px; height:70px;">
                        <div class="payment-method-name">Efectivo</div>
                    </div>
                </div>

                <div class="payment-form active" id="cardForm">
                    <div class="form-group">
                        <label>Número de tarjeta</label>
                        <input type="text" id="cardNumber" placeholder="1234 5678 9012 3456" maxlength="19" required>
                    </div>
                    <div class="form-group">
                        <label>Nombre del titular</label>
                        <input type="text" id="cardHolder" placeholder="Nombre como aparece en la tarjeta" required>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label>Fecha de expiración</label>
                            <input type="text" id="cardExpiry" placeholder="MM/AA" maxlength="5" required>
                        </div>
                        <div class="form-group">
                            <label>CVV</label>
                            <input type="text" id="cardCVV" placeholder="123" maxlength="4" required>
                        </div>
                    </div>
                    <button class="confirm-payment-btn" onclick="confirmPayment()">Confirmar Pago</button>
                </div>

                <div class="payment-form" id="paypalForm">
                    <div class="paypal-redirect-info">
                        <img src="imagenes/paypal.png" alt="PayPal" style="width:100px; height:100px; margin: 20px auto; display: block;">
                        <h3 style="text-align: center; margin: 20px 0;">Serás redirigido a PayPal</h3>
                        <p style="text-align: center; color: #666; margin-bottom: 30px;">
                            Completa tu pago de forma segura en la plataforma de PayPal.<br>
                            Serás redirigido automáticamente después de la compra.
                        </p>
                    </div>
                    <button class="confirm-payment-btn" onclick="redirectToPayPal()">Continuar con PayPal</button>
                </div>

                <div class="payment-form" id="transferForm">
                    <div class="form-group">
                        <label>Banco</label>
                        <select id="transferBank" required>
                            <option value="">Selecciona tu banco</option>
                            <option>BBVA</option>
                            <option>Santander</option>
                            <option>Banamex</option>
                            <option>Banorte</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>CLABE interbancaria</label>
                        <input type="text" id="transferCLABE" placeholder="012345678901234567" maxlength="18" required>
                    </div>
                    <div class="form-group">
                        <label>Nombre del titular</label>
                        <input type="text" id="transferHolder" placeholder="Nombre completo" required>
                    </div>
                    <button class="confirm-payment-btn" onclick="confirmPayment()">Generar orden de transferencia</button>
                </div>

                <div class="payment-form" id="cashForm">
                    <div class="form-group">
                        <label>Método de pago en efectivo</label>
                        <select id="cashMethod" required>
                            <option>Oxxo</option>
                            <option>7-Eleven</option>
                            <option>Farmacias del Ahorro</option>
                            <option>Walmart</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Correo para recibir referencia</label>
                        <input type="email" id="cashEmail" placeholder="tu@gmail.com" required>
                    </div>
                    <button class="confirm-payment-btn" onclick="confirmPayment()">Generar referencia de pago</button>
                </div>
            </div>
        </div>
    </div>

    <script>
       
        document.addEventListener("DOMContentLoaded", () => {
            const deliveryDate = document.getElementById("deliveryDate");
            const today = new Date();
            today.setDate(today.getDate() + 5);
            deliveryDate.value = today.toISOString().split("T")[0];
        });

        
        document.getElementById("customerName").addEventListener("input", function() {
            this.value = this.value.replace(/[0-9]/g, "");
        });

        
        document.getElementById("customerPhone").addEventListener("input", function() {
            this.value = this.value.replace(/[^0-9+\-() ]/g, "");
        });

       
        document.getElementById("customerGmail").addEventListener("input", function() {
            this.value = this.value.toLowerCase();
            if (this.value && !this.value.endsWith("@gmail.com") && this.value.includes("@")) {
                const username = this.value.split("@")[0];
                this.value = username + "@gmail.com";
            }
        });

        document.getElementById("customerGmail").addEventListener("blur", function() {
            if (this.value && !this.value.includes("@")) {
                this.value = this.value + "@gmail.com";
            }
            const gmailPattern = /^[a-zA-Z0-9._%+-]+@gmail\.com$/i;
            if (this.value && !gmailPattern.test(this.value)) {
                this.setCustomValidity("Por favor ingresa un correo válido de Gmail.");
            } else {
                this.setCustomValidity("");
            }
        });

        
        document.getElementById("cardNumber").addEventListener("input", function(e) {
            let value = this.value.replace(/\s/g, "").replace(/[^0-9]/g, "");
            let formattedValue = value.match(/.{1,4}/g)?.join(" ") || value;
            this.value = formattedValue;
        });

        
        document.getElementById("cardHolder").addEventListener("input", function() {
            this.value = this.value.replace(/[0-9]/g, "");
        });

        
        document.getElementById("cardExpiry").addEventListener("input", function(e) {
            let value = this.value.replace(/\D/g, "");
            if (value.length >= 2) {
                value = value.slice(0, 2) + "/" + value.slice(2, 4);
            }
            this.value = value;
        });

        
        document.getElementById("cardCVV").addEventListener("input", function() {
            this.value = this.value.replace(/[^0-9]/g, "");
        });

       
        document.getElementById("transferCLABE").addEventListener("input", function() {
            this.value = this.value.replace(/[^0-9]/g, "");
        });

        
        document.getElementById("transferHolder").addEventListener("input", function() {
            this.value = this.value.replace(/[0-9]/g, "");
        });

      
        function redirectToPayPal() {
          
            const total = document.getElementById('total').textContent;
            const customerName = document.getElementById('customerName').value;
            const customerEmail = document.getElementById('customerGmail').value;
            
            
            if (!customerName || !customerEmail) {
                alert('Por favor completa tu información personal antes de continuar con PayPal');
                return;
            }
            
            
            alert('Redirigiendo a PayPal...\n\nTotal a pagar: ' + total + '\n\nSerás redirigido a la aplicación de PayPal para completar tu pago de forma segura.');
            
            
            setTimeout(() => {
                closePaymentModal();
                alert('Pago completado exitosamente con PayPal ✓');
            }, 2000);
        }

        document.getElementById("cashEmail").addEventListener("input", function() {
            this.value = this.value.toLowerCase();
            if (this.value && !this.value.endsWith("@gmail.com") && this.value.includes("@")) {
                const username = this.value.split("@")[0];
                this.value = username + "@gmail.com";
            }
        });

        document.getElementById("cashEmail").addEventListener("blur", function() {
            if (this.value && !this.value.includes("@")) {
                this.value = this.value + "@gmail.com";
            }
        });
    </script>

    <script src="js/script.js"></script>
</body>
</html>